// Package {{.Package}} -- Generated by folder2go (http://github.com/gohxs/folder2go)
package {{.Package}}
{{if .Handler}}import (
	"mime"
	"net/http"
	"path/filepath"
	"strings"
){{end}}
type fs map[string][]byte

var (
	// Data contains the binarized folder
	Data = fs{ {{range $key,$value := .Data }}
		"{{ $key }}": []byte{ 
{{ $value }} 
		},
	{{end}}
	}
)

{{if .Handler}}
// AssetHandleFunc Http handler
func AssetHandleFunc(w http.ResponseWriter, r *http.Request) {
	urlPath := ""

	// func that handles mux
	server := r.Context().Value(http.ServerContextKey).(*http.Server)
	mux, ok := server.Handler.(*http.ServeMux)
	if ok {
		_, handlerPath := mux.Handler(r)
		urlPath = strings.TrimPrefix(r.URL.String(), handlerPath)
	}
	if urlPath == "" { // Auto index
		urlPath = "index.html"
	}
	data, ok := Data[urlPath]
	if !ok {
		w.WriteHeader(404)
	}

	w.Header().Set("Content-type", mime.TypeByExtension(filepath.Ext(urlPath)))
	w.Write(data)
}
{{end}}
